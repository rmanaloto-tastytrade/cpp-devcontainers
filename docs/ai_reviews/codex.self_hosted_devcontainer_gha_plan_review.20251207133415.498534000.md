- Build+tag base first in workflow: `docker build` (or `bake` target) for base image, tag both `ghcr.io/<org>/<repo>/cpp-dev-base:local` and `ghcr.io/<org>/<repo>/cpp-dev-base:${{ github.sha }}`; never use bare names.  
- Update `.devcontainer/docker-bake.hcl`: set `default` target to depend on base target; in `args`/`tags`, reference `ghcr.io/<org>/<repo>/cpp-dev-base:local` (or `${TAG_BASE}` env) instead of `cpp-cpp-dev-base:local`; add `registry`/`tags` for main image pointing only to GHCR.  
- In `.devcontainer/Dockerfile`: `FROM ${BASE_IMAGE}` with default `ARG BASE_IMAGE=ghcr.io/<org>/<repo>/cpp-dev-base:local` so Bake can override; remove implicit names.  
- Workflow: before bake, `echo "BASE_IMAGE=ghcr.io/<org>/<repo>/cpp-dev-base:local" >> $GITHUB_ENV`; run `docker/build-push-action` (or `bake`) to build/push base with cache-to/from GHCR (`mode=max`); then run `bake` for final image with `cache-from` pointing to GHCR cache and `load`/`push`.  
- Cache: use `cache-from=type=registry,ref=ghcr.io/<org>/<repo>/cpp-dev-base:cache` and same for final image; `cache-to` matching ref. Avoid Docker Hub by never using unqualified refs.  
- Validation guards: add workflow step to fail if `BASE_IMAGE` matches `docker.io/*` or lacks registry (`[[ $BASE_IMAGE =~ ^ghcr.io/ ]] || exit 1`); in bake, set `pull=false` for base target and `no-cache-filter` as needed; optionally set `network=none` for stages to avoid implicit pulls.